{"ast":null,"code":"'use strict';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== 'function' && b !== null) throw new TypeError('Class extends value ' + String(b) + ' is not a constructor or null');\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.UnControlled = exports.Controlled = void 0;\n\nvar React = require('react');\n\nvar SERVER_RENDERED = typeof navigator === 'undefined' || typeof global !== 'undefined' && global['PREVENT_CODEMIRROR_RENDER'] === true;\nvar cm;\n\nif (!SERVER_RENDERED) {\n  cm = require('codemirror');\n}\n\nvar Helper = function () {\n  function Helper() {}\n\n  Helper.equals = function (x, y) {\n    var _this = this;\n\n    var ok = Object.keys,\n        tx = _typeof(x),\n        ty = _typeof(y);\n\n    return x && y && tx === 'object' && tx === ty ? ok(x).length === ok(y).length && ok(x).every(function (key) {\n      return _this.equals(x[key], y[key]);\n    }) : x === y;\n  };\n\n  return Helper;\n}();\n\nvar Shared = function () {\n  function Shared(editor, props) {\n    this.editor = editor;\n    this.props = props;\n  }\n\n  Shared.prototype.delegateCursor = function (position, scroll, focus) {\n    var doc = this.editor.getDoc();\n\n    if (focus) {\n      this.editor.focus();\n    }\n\n    scroll ? doc.setCursor(position) : doc.setCursor(position, null, {\n      scroll: false\n    });\n  };\n\n  Shared.prototype.delegateScroll = function (coordinates) {\n    this.editor.scrollTo(coordinates.x, coordinates.y);\n  };\n\n  Shared.prototype.delegateSelection = function (ranges, focus) {\n    var doc = this.editor.getDoc();\n    doc.setSelections(ranges);\n\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n\n  Shared.prototype.apply = function (props) {\n    if (props && props.selection && props.selection.ranges) {\n      this.delegateSelection(props.selection.ranges, props.selection.focus || false);\n    }\n\n    if (props && props.cursor) {\n      this.delegateCursor(props.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n\n    if (props && props.scroll) {\n      this.delegateScroll(props.scroll);\n    }\n  };\n\n  Shared.prototype.applyNext = function (props, next, preserved) {\n    if (props && props.selection && props.selection.ranges) {\n      if (next && next.selection && next.selection.ranges && !Helper.equals(props.selection.ranges, next.selection.ranges)) {\n        this.delegateSelection(next.selection.ranges, next.selection.focus || false);\n      }\n    }\n\n    if (props && props.cursor) {\n      if (next && next.cursor && !Helper.equals(props.cursor, next.cursor)) {\n        this.delegateCursor(preserved.cursor || next.cursor, next.autoScroll || false, next.autoCursor || false);\n      }\n    }\n\n    if (props && props.scroll) {\n      if (next && next.scroll && !Helper.equals(props.scroll, next.scroll)) {\n        this.delegateScroll(next.scroll);\n      }\n    }\n  };\n\n  Shared.prototype.applyUserDefined = function (props, preserved) {\n    if (preserved && preserved.cursor) {\n      this.delegateCursor(preserved.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n  };\n\n  Shared.prototype.wire = function (props) {\n    var _this = this;\n\n    Object.keys(props || {}).filter(function (p) {\n      return /^on/.test(p);\n    }).forEach(function (prop) {\n      switch (prop) {\n        case 'onBlur':\n          {\n            _this.editor.on('blur', function (cm, event) {\n              _this.props.onBlur(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onContextMenu':\n          {\n            _this.editor.on('contextmenu', function (cm, event) {\n              _this.props.onContextMenu(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onCopy':\n          {\n            _this.editor.on('copy', function (cm, event) {\n              _this.props.onCopy(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onCursor':\n          {\n            _this.editor.on('cursorActivity', function (cm) {\n              _this.props.onCursor(_this.editor, _this.editor.getDoc().getCursor());\n            });\n          }\n          break;\n\n        case 'onCursorActivity':\n          {\n            _this.editor.on('cursorActivity', function (cm) {\n              _this.props.onCursorActivity(_this.editor);\n            });\n          }\n          break;\n\n        case 'onCut':\n          {\n            _this.editor.on('cut', function (cm, event) {\n              _this.props.onCut(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDblClick':\n          {\n            _this.editor.on('dblclick', function (cm, event) {\n              _this.props.onDblClick(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDragEnter':\n          {\n            _this.editor.on('dragenter', function (cm, event) {\n              _this.props.onDragEnter(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onDragLeave':\n          {\n            _this.editor.on('dragleave', function (cm, event) {\n              _this.props.onDragLeave(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDragOver':\n          {\n            _this.editor.on('dragover', function (cm, event) {\n              _this.props.onDragOver(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onDragStart':\n          {\n            _this.editor.on('dragstart', function (cm, event) {\n              _this.props.onDragStart(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onDrop':\n          {\n            _this.editor.on('drop', function (cm, event) {\n              _this.props.onDrop(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onFocus':\n          {\n            _this.editor.on('focus', function (cm, event) {\n              _this.props.onFocus(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onGutterClick':\n          {\n            _this.editor.on('gutterClick', function (cm, lineNumber, gutter, event) {\n              _this.props.onGutterClick(_this.editor, lineNumber, gutter, event);\n            });\n          }\n          break;\n\n        case 'onInputRead':\n          {\n            _this.editor.on('inputRead', function (cm, EditorChangeEvent) {\n              _this.props.onInputRead(_this.editor, EditorChangeEvent);\n            });\n          }\n          break;\n\n        case 'onKeyDown':\n          {\n            _this.editor.on('keydown', function (cm, event) {\n              _this.props.onKeyDown(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onKeyHandled':\n          {\n            _this.editor.on('keyHandled', function (cm, key, event) {\n              _this.props.onKeyHandled(_this.editor, key, event);\n            });\n          }\n          break;\n\n        case 'onKeyPress':\n          {\n            _this.editor.on('keypress', function (cm, event) {\n              _this.props.onKeyPress(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onKeyUp':\n          {\n            _this.editor.on('keyup', function (cm, event) {\n              _this.props.onKeyUp(_this.editor, event);\n            });\n          }\n          break;\n\n        case 'onMouseDown':\n          {\n            _this.editor.on('mousedown', function (cm, event) {\n              _this.props.onMouseDown(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onPaste':\n          {\n            _this.editor.on('paste', function (cm, event) {\n              _this.props.onPaste(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onRenderLine':\n          {\n            _this.editor.on('renderLine', function (cm, line, element) {\n              _this.props.onRenderLine(_this.editor, line, element);\n            });\n\n            break;\n          }\n\n        case 'onScroll':\n          {\n            _this.editor.on('scroll', function (cm) {\n              _this.props.onScroll(_this.editor, _this.editor.getScrollInfo());\n            });\n          }\n          break;\n\n        case 'onSelection':\n          {\n            _this.editor.on('beforeSelectionChange', function (cm, data) {\n              _this.props.onSelection(_this.editor, data);\n            });\n          }\n          break;\n\n        case 'onTouchStart':\n          {\n            _this.editor.on('touchstart', function (cm, event) {\n              _this.props.onTouchStart(_this.editor, event);\n            });\n\n            break;\n          }\n\n        case 'onUpdate':\n          {\n            _this.editor.on('update', function (cm) {\n              _this.props.onUpdate(_this.editor);\n            });\n          }\n          break;\n\n        case 'onViewportChange':\n          {\n            _this.editor.on('viewportChange', function (cm, from, to) {\n              _this.props.onViewportChange(_this.editor, from, to);\n            });\n          }\n          break;\n      }\n    });\n  };\n\n  return Shared;\n}();\n\nvar Controlled = function (_super) {\n  __extends(Controlled, _super);\n\n  function Controlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedNext = false;\n    _this.appliedUserDefined = false;\n    _this.deferred = null;\n    _this.emulating = false;\n    _this.hydrated = false;\n\n    _this.initCb = function () {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n    return _this;\n  }\n\n  Controlled.prototype.hydrate = function (props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function (key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function (key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n\n            _this.mirror.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      this.deferred ? this.resolveChange(props.value) : this.initChange(props.value || '');\n    }\n\n    this.hydrated = true;\n  };\n\n  Controlled.prototype.initChange = function (value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n    var lastLine = doc.lastLine();\n    var lastChar = doc.getLine(doc.lastLine()).length;\n    doc.replaceRange(value || '', {\n      line: 0,\n      ch: 0\n    }, {\n      line: lastLine,\n      ch: lastChar\n    });\n    this.mirror.setValue(value);\n    doc.clearHistory();\n    this.mirror.clearHistory();\n    this.emulating = false;\n  };\n\n  Controlled.prototype.resolveChange = function (value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n\n    if (this.deferred.origin === 'undo') {\n      doc.undo();\n    } else if (this.deferred.origin === 'redo') {\n      doc.redo();\n    } else {\n      doc.replaceRange(this.deferred.text, this.deferred.from, this.deferred.to, this.deferred.origin);\n    }\n\n    if (value && value !== doc.getValue()) {\n      var cursor = doc.getCursor();\n      doc.setValue(value);\n      doc.setCursor(cursor);\n    }\n\n    this.emulating = false;\n    this.deferred = null;\n  };\n\n  Controlled.prototype.mirrorChange = function (deferred) {\n    var doc = this.editor.getDoc();\n\n    if (deferred.origin === 'undo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.undo();\n    } else if (deferred.origin === 'redo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.redo();\n    } else {\n      this.mirror.replaceRange(deferred.text, deferred.from, deferred.to, deferred.origin);\n    }\n\n    return this.mirror.getValue();\n  };\n\n  Controlled.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref, this.props.options);\n    this.shared = new Shared(this.editor, this.props);\n    this.mirror = cm(function () {}, this.props.options);\n    this.editor.on('electricInput', function () {\n      _this.mirror.setHistory(_this.editor.getDoc().getHistory());\n    });\n    this.editor.on('cursorActivity', function () {\n      _this.mirror.setCursor(_this.editor.getDoc().getCursor());\n    });\n    this.editor.on('beforeChange', function (cm, data) {\n      if (_this.emulating) {\n        return;\n      }\n\n      data.cancel();\n      _this.deferred = data;\n\n      var phantomChange = _this.mirrorChange(_this.deferred);\n\n      if (_this.props.onBeforeChange) _this.props.onBeforeChange(_this.editor, _this.deferred, phantomChange);\n    });\n    this.editor.on('change', function (cm, data) {\n      if (!_this.mounted) {\n        return;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n\n    if (this.editor.getOption('autofocus')) {\n      this.editor.focus();\n    }\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  Controlled.prototype.componentDidUpdate = function (prevProps) {\n    if (SERVER_RENDERED) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (this.props.value !== prevProps.value) {\n      this.hydrated = false;\n    }\n\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(this.props);\n\n    if (!this.appliedNext) {\n      this.shared.applyNext(prevProps, this.props, preserved);\n      this.appliedNext = true;\n    }\n\n    this.shared.applyUserDefined(prevProps, preserved);\n    this.appliedUserDefined = true;\n  };\n\n  Controlled.prototype.componentWillUnmount = function () {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  Controlled.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return !SERVER_RENDERED;\n  };\n\n  Controlled.prototype.render = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 '.concat(this.props.className) : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return Controlled;\n}(React.Component);\n\nexports.Controlled = Controlled;\n\nvar UnControlled = function (_super) {\n  __extends(UnControlled, _super);\n\n  function UnControlled(props) {\n    var _this = _super.call(this, props) || this;\n\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedUserDefined = false;\n    _this.continueChange = false;\n    _this.detached = false;\n    _this.hydrated = false;\n\n    _this.initCb = function () {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n\n    _this.mounted = false;\n\n    _this.onBeforeChangeCb = function () {\n      _this.continueChange = true;\n    };\n\n    return _this;\n  }\n\n  UnControlled.prototype.hydrate = function (props) {\n    var _this = this;\n\n    var _options = props && props.options ? props.options : {};\n\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n\n    var optionDelta = Object.keys(userDefinedOptions).some(function (key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function (key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n\n    if (!this.hydrated) {\n      var doc = this.editor.getDoc();\n      var lastLine = doc.lastLine();\n      var lastChar = doc.getLine(doc.lastLine()).length;\n      doc.replaceRange(props.value || '', {\n        line: 0,\n        ch: 0\n      }, {\n        line: lastLine,\n        ch: lastChar\n      });\n    }\n\n    this.hydrated = true;\n  };\n\n  UnControlled.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return;\n    this.detached = this.props.detach === true;\n\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n\n    this.editor = cm(this.ref, this.props.options);\n    this.shared = new Shared(this.editor, this.props);\n    this.editor.on('beforeChange', function (cm, data) {\n      if (_this.props.onBeforeChange) {\n        _this.props.onBeforeChange(_this.editor, data, _this.editor.getValue(), _this.onBeforeChangeCb);\n      }\n    });\n    this.editor.on('change', function (cm, data) {\n      if (!_this.mounted || !_this.props.onChange) {\n        return;\n      }\n\n      if (_this.props.onBeforeChange) {\n        if (_this.continueChange) {\n          _this.props.onChange(_this.editor, data, _this.editor.getValue());\n        }\n      } else {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n    this.editor.getDoc().clearHistory();\n\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n\n  UnControlled.prototype.componentDidUpdate = function (prevProps) {\n    if (this.detached && this.props.detach === false) {\n      this.detached = false;\n\n      if (prevProps.editorDidAttach) {\n        prevProps.editorDidAttach(this.editor);\n      }\n    }\n\n    if (!this.detached && this.props.detach === true) {\n      this.detached = true;\n\n      if (prevProps.editorDidDetach) {\n        prevProps.editorDidDetach(this.editor);\n      }\n    }\n\n    if (SERVER_RENDERED || this.detached) return;\n    var preserved = {\n      cursor: null\n    };\n\n    if (this.props.value !== prevProps.value) {\n      this.hydrated = false;\n      this.applied = false;\n      this.appliedUserDefined = false;\n    }\n\n    if (!prevProps.autoCursor && prevProps.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n\n    this.hydrate(this.props);\n\n    if (!this.applied) {\n      this.shared.apply(prevProps);\n      this.applied = true;\n    }\n\n    if (!this.appliedUserDefined) {\n      this.shared.applyUserDefined(prevProps, preserved);\n      this.appliedUserDefined = true;\n    }\n  };\n\n  UnControlled.prototype.componentWillUnmount = function () {\n    if (SERVER_RENDERED) return;\n\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n\n  UnControlled.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    var update = true;\n    if (SERVER_RENDERED) update = false;\n    if (this.detached && nextProps.detach) update = false;\n    return update;\n  };\n\n  UnControlled.prototype.render = function () {\n    var _this = this;\n\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 '.concat(this.props.className) : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n\n  return UnControlled;\n}(React.Component);\n\nexports.UnControlled = UnControlled;","map":{"version":3,"sources":["C:/Users/Nathan/Documents/CSULB stuff/cecs327/Networking-class/JS PRACTICE/client/node_modules/react-codemirror2/index.js"],"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_typeof","o","Symbol","iterator","constructor","__extends","_extendStatics","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","TypeError","String","__","create","defineProperty","exports","value","UnControlled","Controlled","React","require","SERVER_RENDERED","navigator","global","cm","Helper","equals","x","y","_this","ok","keys","tx","ty","every","Shared","editor","props","delegateCursor","position","scroll","focus","doc","getDoc","setCursor","delegateScroll","coordinates","scrollTo","delegateSelection","ranges","setSelections","selection","cursor","autoScroll","getOption","applyNext","next","preserved","autoCursor","applyUserDefined","wire","filter","test","forEach","prop","on","event","onBlur","onContextMenu","onCopy","onCursor","getCursor","onCursorActivity","onCut","onDblClick","onDragEnter","onDragLeave","onDragOver","onDragStart","onDrop","onFocus","lineNumber","gutter","onGutterClick","EditorChangeEvent","onInputRead","onKeyDown","onKeyHandled","onKeyPress","onKeyUp","onMouseDown","onPaste","line","element","onRenderLine","onScroll","getScrollInfo","data","onSelection","onTouchStart","onUpdate","from","to","onViewportChange","_super","applied","appliedNext","appliedUserDefined","deferred","emulating","hydrated","initCb","editorDidConfigure","mounted","hydrate","_options","options","userDefinedOptions","defaults","optionDelta","some","setOption","mirror","resolveChange","initChange","lastLine","lastChar","getLine","replaceRange","ch","setValue","clearHistory","origin","undo","redo","text","getValue","mirrorChange","setHistory","getHistory","componentDidMount","defineMode","name","fn","ref","shared","cancel","phantomChange","onBeforeChange","onChange","editorDidMount","componentDidUpdate","prevProps","undefined","componentWillUnmount","editorWillUnmount","shouldComponentUpdate","nextProps","nextState","render","className","concat","createElement","self","Component","continueChange","detached","onBeforeChangeCb","detach","editorDidAttach","editorDidDetach","update"],"mappings":"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","sourcesContent":["'use strict';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(o) {\n    return typeof o;\n  } : function(o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nvar __extends = void 0 && (void 0).__extends || function() {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    }\n    instanceof Array && function(d, b) {\n      d.__proto__ = b;\n    } || function(d, b) {\n      for (var p in b)\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function(d, b) {\n    if (typeof b !== 'function' && b !== null) throw new TypeError('Class extends value ' + String(b) + ' is not a constructor or null');\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.UnControlled = exports.Controlled = void 0;\nvar React = require('react');\nvar SERVER_RENDERED = typeof navigator === 'undefined' || typeof global !== 'undefined' && global['PREVENT_CODEMIRROR_RENDER'] === true;\nvar cm;\nif (!SERVER_RENDERED) {\n  cm = require('codemirror');\n}\nvar Helper = function() {\n  function Helper() {}\n  Helper.equals = function(x, y) {\n    var _this = this;\n    var ok = Object.keys,\n      tx = _typeof(x),\n      ty = _typeof(y);\n    return x && y && tx === 'object' && tx === ty ? ok(x).length === ok(y).length && ok(x).every(function(key) {\n      return _this.equals(x[key], y[key]);\n    }) : x === y;\n  };\n  return Helper;\n}();\nvar Shared = function() {\n  function Shared(editor, props) {\n    this.editor = editor;\n    this.props = props;\n  }\n  Shared.prototype.delegateCursor = function(position, scroll, focus) {\n    var doc = this.editor.getDoc();\n    if (focus) {\n      this.editor.focus();\n    }\n    scroll ? doc.setCursor(position) : doc.setCursor(position, null, {\n      scroll: false\n    });\n  };\n  Shared.prototype.delegateScroll = function(coordinates) {\n    this.editor.scrollTo(coordinates.x, coordinates.y);\n  };\n  Shared.prototype.delegateSelection = function(ranges, focus) {\n    var doc = this.editor.getDoc();\n    doc.setSelections(ranges);\n    if (focus) {\n      this.editor.focus();\n    }\n  };\n  Shared.prototype.apply = function(props) {\n    if (props && props.selection && props.selection.ranges) {\n      this.delegateSelection(props.selection.ranges, props.selection.focus || false);\n    }\n    if (props && props.cursor) {\n      this.delegateCursor(props.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n    if (props && props.scroll) {\n      this.delegateScroll(props.scroll);\n    }\n  };\n  Shared.prototype.applyNext = function(props, next, preserved) {\n    if (props && props.selection && props.selection.ranges) {\n      if (next && next.selection && next.selection.ranges && !Helper.equals(props.selection.ranges, next.selection.ranges)) {\n        this.delegateSelection(next.selection.ranges, next.selection.focus || false);\n      }\n    }\n    if (props && props.cursor) {\n      if (next && next.cursor && !Helper.equals(props.cursor, next.cursor)) {\n        this.delegateCursor(preserved.cursor || next.cursor, next.autoScroll || false, next.autoCursor || false);\n      }\n    }\n    if (props && props.scroll) {\n      if (next && next.scroll && !Helper.equals(props.scroll, next.scroll)) {\n        this.delegateScroll(next.scroll);\n      }\n    }\n  };\n  Shared.prototype.applyUserDefined = function(props, preserved) {\n    if (preserved && preserved.cursor) {\n      this.delegateCursor(preserved.cursor, props.autoScroll || false, this.editor.getOption('autofocus') || false);\n    }\n  };\n  Shared.prototype.wire = function(props) {\n    var _this = this;\n    Object.keys(props || {}).filter(function(p) {\n      return /^on/.test(p);\n    }).forEach(function(prop) {\n      switch (prop) {\n        case 'onBlur': {\n          _this.editor.on('blur', function(cm, event) {\n            _this.props.onBlur(_this.editor, event);\n          });\n        }\n        break;\n        case 'onContextMenu': {\n          _this.editor.on('contextmenu', function(cm, event) {\n            _this.props.onContextMenu(_this.editor, event);\n          });\n          break;\n        }\n        case 'onCopy': {\n          _this.editor.on('copy', function(cm, event) {\n            _this.props.onCopy(_this.editor, event);\n          });\n          break;\n        }\n        case 'onCursor': {\n          _this.editor.on('cursorActivity', function(cm) {\n            _this.props.onCursor(_this.editor, _this.editor.getDoc().getCursor());\n          });\n        }\n        break;\n        case 'onCursorActivity': {\n          _this.editor.on('cursorActivity', function(cm) {\n            _this.props.onCursorActivity(_this.editor);\n          });\n        }\n        break;\n        case 'onCut': {\n          _this.editor.on('cut', function(cm, event) {\n            _this.props.onCut(_this.editor, event);\n          });\n          break;\n        }\n        case 'onDblClick': {\n          _this.editor.on('dblclick', function(cm, event) {\n            _this.props.onDblClick(_this.editor, event);\n          });\n          break;\n        }\n        case 'onDragEnter': {\n          _this.editor.on('dragenter', function(cm, event) {\n            _this.props.onDragEnter(_this.editor, event);\n          });\n        }\n        break;\n        case 'onDragLeave': {\n          _this.editor.on('dragleave', function(cm, event) {\n            _this.props.onDragLeave(_this.editor, event);\n          });\n          break;\n        }\n        case 'onDragOver': {\n          _this.editor.on('dragover', function(cm, event) {\n            _this.props.onDragOver(_this.editor, event);\n          });\n        }\n        break;\n        case 'onDragStart': {\n          _this.editor.on('dragstart', function(cm, event) {\n            _this.props.onDragStart(_this.editor, event);\n          });\n          break;\n        }\n        case 'onDrop': {\n          _this.editor.on('drop', function(cm, event) {\n            _this.props.onDrop(_this.editor, event);\n          });\n        }\n        break;\n        case 'onFocus': {\n          _this.editor.on('focus', function(cm, event) {\n            _this.props.onFocus(_this.editor, event);\n          });\n        }\n        break;\n        case 'onGutterClick': {\n          _this.editor.on('gutterClick', function(cm, lineNumber, gutter, event) {\n            _this.props.onGutterClick(_this.editor, lineNumber, gutter, event);\n          });\n        }\n        break;\n        case 'onInputRead': {\n          _this.editor.on('inputRead', function(cm, EditorChangeEvent) {\n            _this.props.onInputRead(_this.editor, EditorChangeEvent);\n          });\n        }\n        break;\n        case 'onKeyDown': {\n          _this.editor.on('keydown', function(cm, event) {\n            _this.props.onKeyDown(_this.editor, event);\n          });\n        }\n        break;\n        case 'onKeyHandled': {\n          _this.editor.on('keyHandled', function(cm, key, event) {\n            _this.props.onKeyHandled(_this.editor, key, event);\n          });\n        }\n        break;\n        case 'onKeyPress': {\n          _this.editor.on('keypress', function(cm, event) {\n            _this.props.onKeyPress(_this.editor, event);\n          });\n        }\n        break;\n        case 'onKeyUp': {\n          _this.editor.on('keyup', function(cm, event) {\n            _this.props.onKeyUp(_this.editor, event);\n          });\n        }\n        break;\n        case 'onMouseDown': {\n          _this.editor.on('mousedown', function(cm, event) {\n            _this.props.onMouseDown(_this.editor, event);\n          });\n          break;\n        }\n        case 'onPaste': {\n          _this.editor.on('paste', function(cm, event) {\n            _this.props.onPaste(_this.editor, event);\n          });\n          break;\n        }\n        case 'onRenderLine': {\n          _this.editor.on('renderLine', function(cm, line, element) {\n            _this.props.onRenderLine(_this.editor, line, element);\n          });\n          break;\n        }\n        case 'onScroll': {\n          _this.editor.on('scroll', function(cm) {\n            _this.props.onScroll(_this.editor, _this.editor.getScrollInfo());\n          });\n        }\n        break;\n        case 'onSelection': {\n          _this.editor.on('beforeSelectionChange', function(cm, data) {\n            _this.props.onSelection(_this.editor, data);\n          });\n        }\n        break;\n        case 'onTouchStart': {\n          _this.editor.on('touchstart', function(cm, event) {\n            _this.props.onTouchStart(_this.editor, event);\n          });\n          break;\n        }\n        case 'onUpdate': {\n          _this.editor.on('update', function(cm) {\n            _this.props.onUpdate(_this.editor);\n          });\n        }\n        break;\n        case 'onViewportChange': {\n          _this.editor.on('viewportChange', function(cm, from, to) {\n            _this.props.onViewportChange(_this.editor, from, to);\n          });\n        }\n        break;\n      }\n    });\n  };\n  return Shared;\n}();\nvar Controlled = function(_super) {\n  __extends(Controlled, _super);\n\n  function Controlled(props) {\n    var _this = _super.call(this, props) || this;\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedNext = false;\n    _this.appliedUserDefined = false;\n    _this.deferred = null;\n    _this.emulating = false;\n    _this.hydrated = false;\n    _this.initCb = function() {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n    _this.mounted = false;\n    return _this;\n  }\n  Controlled.prototype.hydrate = function(props) {\n    var _this = this;\n    var _options = props && props.options ? props.options : {};\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n    var optionDelta = Object.keys(userDefinedOptions).some(function(key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function(key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n            _this.mirror.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n    if (!this.hydrated) {\n      this.deferred ? this.resolveChange(props.value) : this.initChange(props.value || '');\n    }\n    this.hydrated = true;\n  };\n  Controlled.prototype.initChange = function(value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n    var lastLine = doc.lastLine();\n    var lastChar = doc.getLine(doc.lastLine()).length;\n    doc.replaceRange(value || '', {\n      line: 0,\n      ch: 0\n    }, {\n      line: lastLine,\n      ch: lastChar\n    });\n    this.mirror.setValue(value);\n    doc.clearHistory();\n    this.mirror.clearHistory();\n    this.emulating = false;\n  };\n  Controlled.prototype.resolveChange = function(value) {\n    this.emulating = true;\n    var doc = this.editor.getDoc();\n    if (this.deferred.origin === 'undo') {\n      doc.undo();\n    } else if (this.deferred.origin === 'redo') {\n      doc.redo();\n    } else {\n      doc.replaceRange(this.deferred.text, this.deferred.from, this.deferred.to, this.deferred.origin);\n    }\n    if (value && value !== doc.getValue()) {\n      var cursor = doc.getCursor();\n      doc.setValue(value);\n      doc.setCursor(cursor);\n    }\n    this.emulating = false;\n    this.deferred = null;\n  };\n  Controlled.prototype.mirrorChange = function(deferred) {\n    var doc = this.editor.getDoc();\n    if (deferred.origin === 'undo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.undo();\n    } else if (deferred.origin === 'redo') {\n      doc.setHistory(this.mirror.getHistory());\n      this.mirror.redo();\n    } else {\n      this.mirror.replaceRange(deferred.text, deferred.from, deferred.to, deferred.origin);\n    }\n    return this.mirror.getValue();\n  };\n  Controlled.prototype.componentDidMount = function() {\n    var _this = this;\n    if (SERVER_RENDERED) return;\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n    this.editor = cm(this.ref, this.props.options);\n    this.shared = new Shared(this.editor, this.props);\n    this.mirror = cm(function() {}, this.props.options);\n    this.editor.on('electricInput', function() {\n      _this.mirror.setHistory(_this.editor.getDoc().getHistory());\n    });\n    this.editor.on('cursorActivity', function() {\n      _this.mirror.setCursor(_this.editor.getDoc().getCursor());\n    });\n    this.editor.on('beforeChange', function(cm, data) {\n      if (_this.emulating) {\n        return;\n      }\n      data.cancel();\n      _this.deferred = data;\n      var phantomChange = _this.mirrorChange(_this.deferred);\n      if (_this.props.onBeforeChange) _this.props.onBeforeChange(_this.editor, _this.deferred, phantomChange);\n    });\n    this.editor.on('change', function(cm, data) {\n      if (!_this.mounted) {\n        return;\n      }\n      if (_this.props.onChange) {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n    if (this.editor.getOption('autofocus')) {\n      this.editor.focus();\n    }\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n  Controlled.prototype.componentDidUpdate = function(prevProps) {\n    if (SERVER_RENDERED) return;\n    var preserved = {\n      cursor: null\n    };\n    if (this.props.value !== prevProps.value) {\n      this.hydrated = false;\n    }\n    if (!this.props.autoCursor && this.props.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n    this.hydrate(this.props);\n    if (!this.appliedNext) {\n      this.shared.applyNext(prevProps, this.props, preserved);\n      this.appliedNext = true;\n    }\n    this.shared.applyUserDefined(prevProps, preserved);\n    this.appliedUserDefined = true;\n  };\n  Controlled.prototype.componentWillUnmount = function() {\n    if (SERVER_RENDERED) return;\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n  Controlled.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n    return !SERVER_RENDERED;\n  };\n  Controlled.prototype.render = function() {\n    var _this = this;\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 '.concat(this.props.className) : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n  return Controlled;\n}(React.Component);\nexports.Controlled = Controlled;\nvar UnControlled = function(_super) {\n  __extends(UnControlled, _super);\n\n  function UnControlled(props) {\n    var _this = _super.call(this, props) || this;\n    if (SERVER_RENDERED) return _this;\n    _this.applied = false;\n    _this.appliedUserDefined = false;\n    _this.continueChange = false;\n    _this.detached = false;\n    _this.hydrated = false;\n    _this.initCb = function() {\n      if (_this.props.editorDidConfigure) {\n        _this.props.editorDidConfigure(_this.editor);\n      }\n    };\n    _this.mounted = false;\n    _this.onBeforeChangeCb = function() {\n      _this.continueChange = true;\n    };\n    return _this;\n  }\n  UnControlled.prototype.hydrate = function(props) {\n    var _this = this;\n    var _options = props && props.options ? props.options : {};\n    var userDefinedOptions = _extends({}, cm.defaults, this.editor.options, _options);\n    var optionDelta = Object.keys(userDefinedOptions).some(function(key) {\n      return _this.editor.getOption(key) !== userDefinedOptions[key];\n    });\n    if (optionDelta) {\n      Object.keys(userDefinedOptions).forEach(function(key) {\n        if (_options.hasOwnProperty(key)) {\n          if (_this.editor.getOption(key) !== userDefinedOptions[key]) {\n            _this.editor.setOption(key, userDefinedOptions[key]);\n          }\n        }\n      });\n    }\n    if (!this.hydrated) {\n      var doc = this.editor.getDoc();\n      var lastLine = doc.lastLine();\n      var lastChar = doc.getLine(doc.lastLine()).length;\n      doc.replaceRange(props.value || '', {\n        line: 0,\n        ch: 0\n      }, {\n        line: lastLine,\n        ch: lastChar\n      });\n    }\n    this.hydrated = true;\n  };\n  UnControlled.prototype.componentDidMount = function() {\n    var _this = this;\n    if (SERVER_RENDERED) return;\n    this.detached = this.props.detach === true;\n    if (this.props.defineMode) {\n      if (this.props.defineMode.name && this.props.defineMode.fn) {\n        cm.defineMode(this.props.defineMode.name, this.props.defineMode.fn);\n      }\n    }\n    this.editor = cm(this.ref, this.props.options);\n    this.shared = new Shared(this.editor, this.props);\n    this.editor.on('beforeChange', function(cm, data) {\n      if (_this.props.onBeforeChange) {\n        _this.props.onBeforeChange(_this.editor, data, _this.editor.getValue(), _this.onBeforeChangeCb);\n      }\n    });\n    this.editor.on('change', function(cm, data) {\n      if (!_this.mounted || !_this.props.onChange) {\n        return;\n      }\n      if (_this.props.onBeforeChange) {\n        if (_this.continueChange) {\n          _this.props.onChange(_this.editor, data, _this.editor.getValue());\n        }\n      } else {\n        _this.props.onChange(_this.editor, data, _this.editor.getValue());\n      }\n    });\n    this.hydrate(this.props);\n    this.shared.apply(this.props);\n    this.applied = true;\n    this.mounted = true;\n    this.shared.wire(this.props);\n    this.editor.getDoc().clearHistory();\n    if (this.props.editorDidMount) {\n      this.props.editorDidMount(this.editor, this.editor.getValue(), this.initCb);\n    }\n  };\n  UnControlled.prototype.componentDidUpdate = function(prevProps) {\n    if (this.detached && this.props.detach === false) {\n      this.detached = false;\n      if (prevProps.editorDidAttach) {\n        prevProps.editorDidAttach(this.editor);\n      }\n    }\n    if (!this.detached && this.props.detach === true) {\n      this.detached = true;\n      if (prevProps.editorDidDetach) {\n        prevProps.editorDidDetach(this.editor);\n      }\n    }\n    if (SERVER_RENDERED || this.detached) return;\n    var preserved = {\n      cursor: null\n    };\n    if (this.props.value !== prevProps.value) {\n      this.hydrated = false;\n      this.applied = false;\n      this.appliedUserDefined = false;\n    }\n    if (!prevProps.autoCursor && prevProps.autoCursor !== undefined) {\n      preserved.cursor = this.editor.getDoc().getCursor();\n    }\n    this.hydrate(this.props);\n    if (!this.applied) {\n      this.shared.apply(prevProps);\n      this.applied = true;\n    }\n    if (!this.appliedUserDefined) {\n      this.shared.applyUserDefined(prevProps, preserved);\n      this.appliedUserDefined = true;\n    }\n  };\n  UnControlled.prototype.componentWillUnmount = function() {\n    if (SERVER_RENDERED) return;\n    if (this.props.editorWillUnmount) {\n      this.props.editorWillUnmount(cm);\n    }\n  };\n  UnControlled.prototype.shouldComponentUpdate = function(nextProps, nextState) {\n    var update = true;\n    if (SERVER_RENDERED) update = false;\n    if (this.detached && nextProps.detach) update = false;\n    return update;\n  };\n  UnControlled.prototype.render = function() {\n    var _this = this;\n    if (SERVER_RENDERED) return null;\n    var className = this.props.className ? 'react-codemirror2 '.concat(this.props.className) : 'react-codemirror2';\n    return React.createElement('div', {\n      className: className,\n      ref: function ref(self) {\n        return _this.ref = self;\n      }\n    });\n  };\n  return UnControlled;\n}(React.Component);\nexports.UnControlled = UnControlled;"]},"metadata":{},"sourceType":"script"}